(()=>{var e={};e.id=8941,e.ids=[8941],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},83122:e=>{"use strict";e.exports=require("undici")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},28164:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d}),r(35678),r(13321),r(85070),r(35866);var s=r(23191),a=r(88716),o=r(37922),n=r.n(o),i=r(95231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let d=["",{children:["dashboard",{children:["platform-management",{children:["user-data-export",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,35678)),"C:\\Users\\Admin\\Desktop\\app\\app\\dashboard\\platform-management\\user-data-export\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,13321)),"C:\\Users\\Admin\\Desktop\\app\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,85070)),"C:\\Users\\Admin\\Desktop\\app\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\Admin\\Desktop\\app\\app\\dashboard\\platform-management\\user-data-export\\page.tsx"],u="/dashboard/platform-management/user-data-export/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/platform-management/user-data-export/page",pathname:"/dashboard/platform-management/user-data-export",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},99660:(e,t,r)=>{Promise.resolve().then(r.bind(r,44820))},44820:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var s=r(10326),a=r(17577),o=r(12727),n=r(29752),i=r(91664),l=r(41156),d=r(77506),c=r(88319),u=r(41291),p=r(31540),m=r(84097),x=r(38227),f=r(38443),h=r(44542);function b(){let{toast:e}=(0,m.pm)(),[t,r]=(0,a.useState)([]),[b,g]=(0,a.useState)(!1),[v,j]=(0,a.useState)(null),y=(0,a.useCallback)(async()=>{g(!0),j(null),r([]);try{let t=await fetch("/api/fetch-user-info");if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to fetch data.")}let s=await t.json();r(s.users),e({title:"Success",description:`Fetched data for ${s.users.length} users.`})}catch(r){let t=r instanceof Error?r.message:"An unknown error occurred.";j(t),e({variant:"destructive",title:"Error",description:t})}finally{g(!1)}},[e]);return(0,s.jsxs)("div",{className:"p-8 space-y-8",children:[s.jsx(o.m,{title:"User Data Export",description:"Fetch and view combined data from Firebase Authentication and Firestore.",children:(0,s.jsxs)(i.Button,{onClick:y,disabled:b,children:[b?s.jsx(d.Z,{className:"mr-2 h-4 w-4 animate-spin"}):s.jsx(c.Z,{className:"mr-2 h-4 w-4"}),"Fetch User Data"]})}),(0,s.jsxs)(n.Zb,{children:[(0,s.jsxs)(n.Ol,{children:[s.jsx(n.ll,{children:"Fetched Data"}),s.jsx(n.SZ,{children:"The table below shows user data from Firebase Auth combined with their corresponding record in the 'users' Firestore collection."})]}),s.jsx(n.aY,{children:b?(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(x.O,{className:"h-12 w-full"}),s.jsx(x.O,{className:"h-12 w-full"}),s.jsx(x.O,{className:"h-12 w-full"})]}):v?(0,s.jsxs)(n.Zb,{className:"bg-destructive/10 border-destructive",children:[s.jsx(n.Ol,{children:(0,s.jsxs)(n.ll,{className:"text-base text-destructive flex items-center",children:[s.jsx(u.Z,{className:"mr-2 h-5 w-5"})," Error"]})}),s.jsx(n.aY,{children:s.jsx("p",{className:"text-sm text-destructive",children:v})})]}):(0,s.jsxs)(s.Fragment,{children:[t.length>0&&s.jsx("div",{className:"flex justify-end mb-4",children:(0,s.jsxs)(i.Button,{onClick:()=>{if(0===t.length){e({variant:"destructive",title:"No data to export."});return}let r=new Blob([JSON.stringify(t,null,2)],{type:"application/json;charset=utf-8"});(0,h.saveAs)(r,"user-details-export.json"),e({title:"Exported to JSON"})},variant:"outline",children:[s.jsx(p.Z,{className:"mr-2 h-4 w-4"})," Export as JSON"]})}),s.jsx("div",{className:"overflow-x-auto rounded-md border",children:(0,s.jsxs)(l.iA,{children:[s.jsx(l.xD,{children:(0,s.jsxs)(l.SC,{children:[s.jsx(l.ss,{children:"UID (From Auth)"}),s.jsx(l.ss,{children:"Email (From Auth)"}),s.jsx(l.ss,{children:"Role (From Firestore)"}),s.jsx(l.ss,{children:"School ID (From Firestore)"})]})}),s.jsx(l.RM,{children:t.length>0?t.map(e=>(0,s.jsxs)(l.SC,{children:[s.jsx(l.pj,{className:"font-mono text-xs",children:e.uid}),s.jsx(l.pj,{children:e.email}),s.jsx(l.pj,{children:e.firestoreData?.role?s.jsx(f.C,{children:e.firestoreData.role}):s.jsx(f.C,{variant:"destructive",children:"Not Set"})}),s.jsx(l.pj,{children:e.firestoreData?.schoolId||"N/A"})]},e.uid)):s.jsx(l.SC,{children:s.jsx(l.pj,{colSpan:4,className:"text-center py-10 text-muted-foreground",children:'No data fetched yet. Click the "Fetch User Data" button to begin.'})})})]})})]})})]})]})}},44542:function(e,t){var r,s,a;s=[],void 0!==(a="function"==typeof(r=function(){"use strict";function t(e,t,r){var s=new XMLHttpRequest;s.open("GET",e),s.responseType="blob",s.onload=function(){n(s.response,t,r)},s.onerror=function(){console.error("could not download file")},s.send()}function r(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function s(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(r){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var a="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,o=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),n=a.saveAs||("object"!=typeof window||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(e,o,n){var i=a.URL||a.webkitURL,l=document.createElement("a");o=o||e.name||"download",l.download=o,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?s(l):r(l.href)?t(e,o,n):s(l,l.target="_blank")):(l.href=i.createObjectURL(e),setTimeout(function(){i.revokeObjectURL(l.href)},4e4),setTimeout(function(){s(l)},0))}:"msSaveOrOpenBlob"in navigator?function(e,a,o){if(a=a||e.name||"download","string"!=typeof e){var n;navigator.msSaveOrOpenBlob((void 0===(n=o)?n={autoBom:!1}:"object"!=typeof n&&(console.warn("Deprecated: Expected third argument to be a object"),n={autoBom:!n}),n.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\uFEFF",e],{type:e.type}):e),a)}else if(r(e))t(e,a,o);else{var i=document.createElement("a");i.href=e,i.target="_blank",setTimeout(function(){s(i)})}}:function(e,r,s,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),"string"==typeof e)return t(e,r,s);var i="application/octet-stream"===e.type,l=/constructor/i.test(a.HTMLElement)||a.safari,d=/CriOS\/[\d]+/.test(navigator.userAgent);if((d||i&&l||o)&&"undefined"!=typeof FileReader){var c=new FileReader;c.onloadend=function(){var e=c.result;e=d?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=e:location=e,n=null},c.readAsDataURL(e)}else{var u=a.URL||a.webkitURL,p=u.createObjectURL(e);n?n.location=p:location.href=p,n=null,setTimeout(function(){u.revokeObjectURL(p)},4e4)}});a.saveAs=n.saveAs=n,e.exports=n})?r.apply(t,s):r)&&(e.exports=a)},41291:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(62881).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},31540:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(62881).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},12727:(e,t,r)=>{"use strict";r.d(t,{m:()=>a});var s=r(10326);function a({title:e,description:t,children:r}){return(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0 md:space-x-4",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:e}),s.jsx("p",{className:"text-lg text-muted-foreground",children:t})]}),r&&s.jsx("div",{className:"flex-shrink-0",children:r})]})}r(17577)},38443:(e,t,r)=>{"use strict";r.d(t,{C:()=>i});var s=r(10326);r(17577);var a=r(79360),o=r(51223);let n=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i({className:e,variant:t,...r}){return s.jsx("div",{className:(0,o.cn)(n({variant:t}),e),...r})}},29752:(e,t,r)=>{"use strict";r.d(t,{Ol:()=>i,SZ:()=>d,Zb:()=>n,aY:()=>c,eW:()=>u,ll:()=>l});var s=r(10326),a=r(17577),o=r(51223);let n=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,o.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));n.displayName="Card";let i=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",e),...t}));i.displayName="CardHeader";let l=a.forwardRef(({className:e,...t},r)=>s.jsx("h3",{ref:r,className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));l.displayName="CardTitle";let d=a.forwardRef(({className:e,...t},r)=>s.jsx("p",{ref:r,className:(0,o.cn)("text-sm text-muted-foreground",e),...t}));d.displayName="CardDescription";let c=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,o.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent";let u=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,o.cn)("flex items-center p-6 pt-0",e),...t}));u.displayName="CardFooter"},38227:(e,t,r)=>{"use strict";r.d(t,{O:()=>o});var s=r(10326),a=r(51223);function o({className:e,...t}){return s.jsx("div",{className:(0,a.cn)("animate-pulse rounded-md bg-muted",e),...t})}},41156:(e,t,r)=>{"use strict";r.d(t,{RM:()=>l,SC:()=>d,iA:()=>n,pj:()=>u,ss:()=>c,xD:()=>i});var s=r(10326),a=r(17577),o=r(51223);let n=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:r,className:(0,o.cn)("w-full caption-bottom text-sm",e),...t})}));n.displayName="Table";let i=a.forwardRef(({className:e,...t},r)=>s.jsx("thead",{ref:r,className:(0,o.cn)("[&_tr]:border-b",e),...t}));i.displayName="TableHeader";let l=a.forwardRef(({className:e,...t},r)=>s.jsx("tbody",{ref:r,className:(0,o.cn)("[&_tr:last-child]:border-0",e),...t}));l.displayName="TableBody",a.forwardRef(({className:e,...t},r)=>s.jsx("tfoot",{ref:r,className:(0,o.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let d=a.forwardRef(({className:e,...t},r)=>s.jsx("tr",{ref:r,className:(0,o.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));d.displayName="TableRow";let c=a.forwardRef(({className:e,...t},r)=>s.jsx("th",{ref:r,className:(0,o.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));c.displayName="TableHead";let u=a.forwardRef(({className:e,...t},r)=>s.jsx("td",{ref:r,className:(0,o.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));u.displayName="TableCell",a.forwardRef(({className:e,...t},r)=>s.jsx("caption",{ref:r,className:(0,o.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption"},35678:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>n,__esModule:()=>o,default:()=>i});var s=r(68570);let a=(0,s.createProxy)(String.raw`C:\Users\Admin\Desktop\app\app\dashboard\platform-management\user-data-export\page.tsx`),{__esModule:o,$$typeof:n}=a;a.default;let i=(0,s.createProxy)(String.raw`C:\Users\Admin\Desktop\app\app\dashboard\platform-management\user-data-export\page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[8537,434,3121,9082,8578],()=>r(28164));module.exports=s})();