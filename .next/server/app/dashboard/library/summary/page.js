(()=>{var e={};e.id=4821,e.ids=[4821],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},83122:e=>{"use strict";e.exports=require("undici")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},39126:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),r(24643),r(13321),r(85070),r(35866);var s=r(23191),a=r(88716),o=r(37922),n=r.n(o),i=r(95231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let d=["",{children:["dashboard",{children:["library",{children:["summary",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,24643)),"C:\\Users\\Admin\\Desktop\\app\\app\\dashboard\\library\\summary\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,13321)),"C:\\Users\\Admin\\Desktop\\app\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,85070)),"C:\\Users\\Admin\\Desktop\\app\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\Admin\\Desktop\\app\\app\\dashboard\\library\\summary\\page.tsx"],u="/dashboard/library/summary/page",p={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/library/summary/page",pathname:"/dashboard/library/summary",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},99580:(e,t,r)=>{Promise.resolve().then(r.bind(r,54081))},54081:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>C});var s=r(10326),a=r(17577),o=r(35047),n=r(12727),i=r(29752),l=r(91664),d=r(41156),c=r(86333);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let u=(0,r(62881).Z)("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);var p=r(98919),x=r(77243),m=r(24061),h=r(64004),f=r(31540),b=r(5932),j=r(84097),y=r(38227),v=r(76025),g=r(76),w=r(38443),N=r(44542);async function k(e){if(!v.db)throw Error("Firestore is not configured.");let[t,r]=await Promise.all([(0,g.PL)((0,g.IO)((0,g.hJ)(v.db,"books"),(0,g.ar)("schoolId","==",e))),(0,g.PL)((0,g.IO)((0,g.hJ)(v.db,"libraryTransactions"),(0,g.ar)("schoolId","==",e)))]);return{books:t.docs.map(e=>({...e.data(),id:e.id})),transactions:r.docs.map(e=>({...e.data(),id:e.id}))}}function C(){let{toast:e}=(0,j.pm)(),t=(0,o.useRouter)(),[r,v]=(0,a.useState)([]),[g,C]=(0,a.useState)([]),[S,R]=(0,a.useState)(!0),[A,q]=(0,a.useState)(null);(0,a.useCallback)(async t=>{R(!0);try{let{books:e,transactions:r}=await k(t);v(e),C(r)}catch(t){e({variant:"destructive",title:"Error",description:"Could not load library data."})}finally{R(!1)}},[e]);let T=(0,a.useMemo)(()=>{let e=r.reduce((e,t)=>e+t.totalCopies,0);return{totalBooks:e,uniqueTitles:r.length,totalValue:r.reduce((e,t)=>e+t.totalCopies*(t.value||0),0),issuedCount:g.length}},[r,g]);return(0,a.useMemo)(()=>{let e=new Map;return r.forEach(t=>{e.set(t.author,(e.get(t.author)||0)+t.totalCopies)}),Array.from(e.entries()).map(([e,t])=>({name:e,books:t})).sort((e,t)=>t.books-e.books).slice(0,10)},[r]),(0,s.jsxs)("div",{className:"p-8 space-y-8 printable-area",children:[s.jsx(n.m,{title:"Library Summary & Reports",description:"An overview of your library's inventory and activities.",children:(0,s.jsxs)(l.Button,{variant:"outline",onClick:()=>t.back(),children:[s.jsx(c.Z,{className:"mr-2 h-4 w-4"})," Back to Library"]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,s.jsxs)(i.Zb,{children:[(0,s.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between",children:[s.jsx(i.ll,{children:"Unique Titles"}),s.jsx(u,{className:"h-5 w-5 text-muted-foreground"})]}),s.jsx(i.aY,{className:"text-2xl font-bold",children:T.uniqueTitles})]}),(0,s.jsxs)(i.Zb,{children:[(0,s.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between",children:[s.jsx(i.ll,{children:"Total Books"}),s.jsx(p.Z,{className:"h-5 w-5 text-muted-foreground"})]}),s.jsx(i.aY,{className:"text-2xl font-bold",children:T.totalBooks})]}),(0,s.jsxs)(i.Zb,{children:[(0,s.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between",children:[s.jsx(i.ll,{children:"Books on Loan"}),s.jsx(x.Z,{className:"h-5 w-5 text-muted-foreground"})]}),s.jsx(i.aY,{className:"text-2xl font-bold",children:T.issuedCount})]}),(0,s.jsxs)(i.Zb,{children:[(0,s.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between",children:[s.jsx(i.ll,{children:"Total Value"}),s.jsx(m.Z,{className:"h-5 w-5 text-muted-foreground"})]}),(0,s.jsxs)(i.aY,{className:"text-2xl font-bold",children:["$",T.totalValue.toFixed(2)]})]})]}),(0,s.jsxs)(i.Zb,{children:[s.jsx(i.Ol,{children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[s.jsx(i.ll,{children:"Library Reports"}),s.jsx(i.SZ,{children:"Detailed reports on inventory and issued books."})]}),(0,s.jsxs)("div",{className:"flex gap-2 print:hidden",children:[(0,s.jsxs)(l.Button,{variant:"outline",onClick:()=>{e({title:"Printing...",description:"Use your browser's print dialog to save as PDF."}),window.print()},children:[s.jsx(h.Z,{className:"mr-2 h-4 w-4"})," Print"]}),(0,s.jsxs)(l.Button,{variant:"outline",onClick:()=>{let t="data:text/csv;charset=utf-8,";t+="Inventory Summary\nTitle,Author,ISBN,Total Copies,Available,Value\n",r.forEach(e=>{t+=`"${e.title}","${e.author}","${e.isbn||""}",${e.totalCopies},${e.availableCopies},${e.value||0}
`}),t+="\nIssued Books\nBook Title,Student Name,Student ID,Due Date\n",g.forEach(e=>{t+=`"${e.bookTitle}","${e.studentName}","${e.studentId}","${e.dueDate}"
`});let s=new Blob([t],{type:"text/csv;charset=utf-8;"});(0,N.saveAs)(s,"library_report.csv"),e({title:"Exported",description:"Library report has been downloaded as a CSV file."})},children:[s.jsx(f.Z,{className:"mr-2 h-4 w-4"})," Export CSV"]}),(0,s.jsxs)(l.Button,{variant:"outline",onClick:()=>{e({title:"Simulating Email",description:"An email with the library report would be sent."})},children:[s.jsx(b.Z,{className:"mr-2 h-4 w-4"})," Email Report"]})]})]})}),(0,s.jsxs)(i.aY,{className:"space-y-8",children:[(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Books on Loan"}),s.jsx("div",{className:"overflow-x-auto rounded-md border",children:(0,s.jsxs)(d.iA,{children:[s.jsx(d.xD,{children:(0,s.jsxs)(d.SC,{children:[s.jsx(d.ss,{children:"Book Title"}),s.jsx(d.ss,{children:"Student Name"}),s.jsx(d.ss,{children:"Student ID"}),s.jsx(d.ss,{children:"Due Date"})]})}),s.jsx(d.RM,{children:S?s.jsx(d.SC,{children:s.jsx(d.pj,{colSpan:4,children:s.jsx(y.O,{className:"h-8"})})}):g.length>0?g.map(e=>(0,s.jsxs)(d.SC,{children:[s.jsx(d.pj,{children:e.bookTitle}),s.jsx(d.pj,{children:e.studentName}),s.jsx(d.pj,{children:e.studentId}),s.jsx(d.pj,{children:new Date(e.dueDate).toLocaleDateString()})]},e.id)):s.jsx(d.SC,{children:s.jsx(d.pj,{colSpan:4,className:"h-24 text-center",children:"No books are currently on loan."})})})]})})]}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Full Inventory"}),s.jsx("div",{className:"overflow-x-auto rounded-md border max-h-96",children:(0,s.jsxs)(d.iA,{children:[s.jsx(d.xD,{children:(0,s.jsxs)(d.SC,{children:[s.jsx(d.ss,{children:"Title"}),s.jsx(d.ss,{children:"Author"}),s.jsx(d.ss,{children:"ISBN"}),s.jsx(d.ss,{children:"Available"}),s.jsx(d.ss,{children:"Total"})]})}),s.jsx(d.RM,{children:S?s.jsx(d.SC,{children:s.jsx(d.pj,{colSpan:5,children:s.jsx(y.O,{className:"h-8"})})}):r.length>0?r.map(e=>(0,s.jsxs)(d.SC,{children:[s.jsx(d.pj,{className:"font-medium",children:e.title}),s.jsx(d.pj,{children:e.author}),s.jsx(d.pj,{children:e.isbn||"N/A"}),s.jsx(d.pj,{children:s.jsx(w.C,{children:e.availableCopies})}),s.jsx(d.pj,{children:e.totalCopies})]},e.id)):s.jsx(d.SC,{children:s.jsx(d.pj,{colSpan:5,className:"h-24 text-center",children:"No books in inventory."})})})]})})]})]})]})]})}},44542:function(e,t){var r,s,a;s=[],void 0!==(a="function"==typeof(r=function(){"use strict";function t(e,t,r){var s=new XMLHttpRequest;s.open("GET",e),s.responseType="blob",s.onload=function(){n(s.response,t,r)},s.onerror=function(){console.error("could not download file")},s.send()}function r(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function s(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(r){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var a="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,o=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),n=a.saveAs||("object"!=typeof window||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(e,o,n){var i=a.URL||a.webkitURL,l=document.createElement("a");o=o||e.name||"download",l.download=o,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?s(l):r(l.href)?t(e,o,n):s(l,l.target="_blank")):(l.href=i.createObjectURL(e),setTimeout(function(){i.revokeObjectURL(l.href)},4e4),setTimeout(function(){s(l)},0))}:"msSaveOrOpenBlob"in navigator?function(e,a,o){if(a=a||e.name||"download","string"!=typeof e){var n;navigator.msSaveOrOpenBlob((void 0===(n=o)?n={autoBom:!1}:"object"!=typeof n&&(console.warn("Deprecated: Expected third argument to be a object"),n={autoBom:!n}),n.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\uFEFF",e],{type:e.type}):e),a)}else if(r(e))t(e,a,o);else{var i=document.createElement("a");i.href=e,i.target="_blank",setTimeout(function(){s(i)})}}:function(e,r,s,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),"string"==typeof e)return t(e,r,s);var i="application/octet-stream"===e.type,l=/constructor/i.test(a.HTMLElement)||a.safari,d=/CriOS\/[\d]+/.test(navigator.userAgent);if((d||i&&l||o)&&"undefined"!=typeof FileReader){var c=new FileReader;c.onloadend=function(){var e=c.result;e=d?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=e:location=e,n=null},c.readAsDataURL(e)}else{var u=a.URL||a.webkitURL,p=u.createObjectURL(e);n?n.location=p:location.href=p,n=null,setTimeout(function(){u.revokeObjectURL(p)},4e4)}});a.saveAs=n.saveAs=n,e.exports=n})?r.apply(t,s):r)&&(e.exports=a)},86333:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(62881).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},77243:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(62881).Z)("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]])},31540:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(62881).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},64004:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(62881).Z)("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]])},24061:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(62881).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},12727:(e,t,r)=>{"use strict";r.d(t,{m:()=>a});var s=r(10326);function a({title:e,description:t,children:r}){return(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0 md:space-x-4",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:e}),s.jsx("p",{className:"text-lg text-muted-foreground",children:t})]}),r&&s.jsx("div",{className:"flex-shrink-0",children:r})]})}r(17577)},38443:(e,t,r)=>{"use strict";r.d(t,{C:()=>i});var s=r(10326);r(17577);var a=r(79360),o=r(51223);let n=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i({className:e,variant:t,...r}){return s.jsx("div",{className:(0,o.cn)(n({variant:t}),e),...r})}},29752:(e,t,r)=>{"use strict";r.d(t,{Ol:()=>i,SZ:()=>d,Zb:()=>n,aY:()=>c,eW:()=>u,ll:()=>l});var s=r(10326),a=r(17577),o=r(51223);let n=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,o.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));n.displayName="Card";let i=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",e),...t}));i.displayName="CardHeader";let l=a.forwardRef(({className:e,...t},r)=>s.jsx("h3",{ref:r,className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));l.displayName="CardTitle";let d=a.forwardRef(({className:e,...t},r)=>s.jsx("p",{ref:r,className:(0,o.cn)("text-sm text-muted-foreground",e),...t}));d.displayName="CardDescription";let c=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,o.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent";let u=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,o.cn)("flex items-center p-6 pt-0",e),...t}));u.displayName="CardFooter"},38227:(e,t,r)=>{"use strict";r.d(t,{O:()=>o});var s=r(10326),a=r(51223);function o({className:e,...t}){return s.jsx("div",{className:(0,a.cn)("animate-pulse rounded-md bg-muted",e),...t})}},41156:(e,t,r)=>{"use strict";r.d(t,{RM:()=>l,SC:()=>d,iA:()=>n,pj:()=>u,ss:()=>c,xD:()=>i});var s=r(10326),a=r(17577),o=r(51223);let n=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:r,className:(0,o.cn)("w-full caption-bottom text-sm",e),...t})}));n.displayName="Table";let i=a.forwardRef(({className:e,...t},r)=>s.jsx("thead",{ref:r,className:(0,o.cn)("[&_tr]:border-b",e),...t}));i.displayName="TableHeader";let l=a.forwardRef(({className:e,...t},r)=>s.jsx("tbody",{ref:r,className:(0,o.cn)("[&_tr:last-child]:border-0",e),...t}));l.displayName="TableBody",a.forwardRef(({className:e,...t},r)=>s.jsx("tfoot",{ref:r,className:(0,o.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let d=a.forwardRef(({className:e,...t},r)=>s.jsx("tr",{ref:r,className:(0,o.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));d.displayName="TableRow";let c=a.forwardRef(({className:e,...t},r)=>s.jsx("th",{ref:r,className:(0,o.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));c.displayName="TableHead";let u=a.forwardRef(({className:e,...t},r)=>s.jsx("td",{ref:r,className:(0,o.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));u.displayName="TableCell",a.forwardRef(({className:e,...t},r)=>s.jsx("caption",{ref:r,className:(0,o.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption"},24643:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>n,__esModule:()=>o,default:()=>i});var s=r(68570);let a=(0,s.createProxy)(String.raw`C:\Users\Admin\Desktop\app\app\dashboard\library\summary\page.tsx`),{__esModule:o,$$typeof:n}=a;a.default;let i=(0,s.createProxy)(String.raw`C:\Users\Admin\Desktop\app\app\dashboard\library\summary\page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[8537,434,3121,9082,8578],()=>r(39126));module.exports=s})();