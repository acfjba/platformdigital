(()=>{var e={};e.id=2208,e.ids=[2208],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},83122:e=>{"use strict";e.exports=require("undici")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},22741:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),s(35221),s(13321),s(85070),s(35866);var r=s(23191),a=s(88716),i=s(37922),n=s.n(i),l=s(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d=["",{children:["dashboard",{children:["school-info",{children:["news",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,35221)),"C:\\Users\\Admin\\Desktop\\app\\app\\dashboard\\school-info\\news\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,13321)),"C:\\Users\\Admin\\Desktop\\app\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,85070)),"C:\\Users\\Admin\\Desktop\\app\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\Admin\\Desktop\\app\\app\\dashboard\\school-info\\news\\page.tsx"],u="/dashboard/school-info/news/page",p={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/school-info/news/page",pathname:"/dashboard/school-info/news",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},25028:(e,t,s)=>{Promise.resolve().then(s.bind(s,94911))},94911:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>C});var r=s(10326),a=s(17577),i=s(12727),n=s(29752),l=s(91664),o=s(41190),d=s(44794),c=s(82015);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let u=(0,s(62881).Z)("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);var p=s(81660),x=s(13961),h=s(77506),m=s(31215),f=s(41291),y=s(43810),v=s(98091),b=s(84097),g=s(76025),w=s(76),j=s(38227);let N="singleton",k=[{id:"news_1",title:"Parent-Teacher Interviews Next Week",date:new Date(new Date().setDate(new Date().getDate()+7)).toISOString().split("T")[0],content:"Please be advised that parent-teacher interviews for Term 2 will be held next week from Monday to Wednesday. Please contact the school office to book a time with your child's teacher."},{id:"news_2",title:"Sports Day Postponed",date:new Date().toISOString().split("T")[0],content:"Due to expected bad weather, the Annual Sports Day has been postponed. A new date will be announced shortly. All students will have a normal school day."}];function C(){let[e,t]=(0,a.useState)([]),[s,C]=(0,a.useState)(!0),[P,Z]=(0,a.useState)(!1),[q,D]=(0,a.useState)(null),[A,M]=(0,a.useState)(null),[S,_]=(0,a.useState)(null),{toast:$}=(0,b.pm)(),T="system-admin"===A||"head-teacher"===A||"primary-admin"===A||"assistant-head-teacher"===A||"librarian"===A;(0,a.useCallback)(async e=>{if(C(!0),!g.W||!g.db){t(k),C(!1);return}let s=(0,w.JU)(g.db,`schools/${e}/schoolInfo`,N),r=await (0,w.QT)(s);if(r.exists()){let e=r.data();t(e.articles&&e.articles.length>0?e.articles:k)}else t(k);C(!1)},[]);let I=e=>{t(t=>t.filter(t=>t.id!==e)),$({title:"Article removed",description:"The change will be permanent once you save."})},R=(e,s,r)=>{t(t=>t.map(t=>t.id===e?{...t,[s]:r}:t))},O=async()=>{if(!q){$({variant:"destructive",title:"Error",description:"School ID not found."});return}if(!T){$({variant:"destructive",title:"Permission Denied",description:"You do not have permission to save changes."});return}if(!g.db){$({variant:"destructive",title:"Error",description:"Database not connected."});return}Z(!0);try{let t=(0,w.JU)(g.db,`schools/${q}/schoolInfo`,N);await (0,w.pl)(t,{articles:e},{merge:!0}),$({title:"Success",description:"News and announcements have been updated."})}catch(e){$({variant:"destructive",title:"Error",description:"Could not save news."})}finally{Z(!1)}},U=e=>{_(e),$({title:"Article Copied",description:`"${e.title}" content is ready to be pasted.`})};return(0,r.jsxs)("div",{className:"p-8 space-y-8",children:[r.jsx(i.m,{title:"Urgent News & Announcements",description:"Manage and view important updates for the school community."}),(0,r.jsxs)(n.Zb,{children:[(0,r.jsxs)(n.Ol,{className:"flex flex-row justify-between items-center",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)(n.ll,{className:"flex items-center gap-2",children:[r.jsx(u,{})," News Feed"]}),r.jsx(n.SZ,{children:"View, add, or edit school-wide announcements."})]}),T&&(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,r.jsxs)(l.Button,{onClick:()=>{if(!S){$({variant:"destructive",title:"Paste Error",description:"No article has been copied."});return}let e={id:`news_${Date.now()}`,title:`Copy of: ${S.title}`,date:new Date().toISOString().split("T")[0],content:S.content};t(t=>[e,...t]),$({title:"Article Pasted",description:"A new article has been created from your copied content."})},variant:"outline",disabled:!S,children:[r.jsx(p.Z,{className:"mr-2 h-4 w-4"})," Paste Article"]}),(0,r.jsxs)(l.Button,{onClick:()=>{let e={id:`news_${Date.now()}`,title:"New Announcement Title",date:new Date().toISOString().split("T")[0],content:"Write the details of the announcement here."};t(t=>[e,...t]),$({title:"New article added",description:"Fill in the details and save."})},children:[r.jsx(x.Z,{className:"mr-2 h-4 w-4"})," Add News"]}),(0,r.jsxs)(l.Button,{onClick:O,disabled:P,children:[P?r.jsx(h.Z,{className:"mr-2 h-4 w-4 animate-spin"}):r.jsx(m.Z,{className:"mr-2 h-4 w-4"}),"Save All"]})]})]}),(0,r.jsxs)(n.aY,{className:"space-y-6",children:[s&&(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx(j.O,{className:"h-48 w-full"}),r.jsx(j.O,{className:"h-48 w-full"})]}),!s&&0===e.length&&(0,r.jsxs)("div",{className:"text-center py-10 border-2 border-dashed rounded-lg",children:[r.jsx(f.Z,{className:"mx-auto h-12 w-12 text-muted-foreground"}),r.jsx("p",{className:"mt-4 text-muted-foreground",children:"No news articles have been posted yet."}),T&&r.jsx("p",{className:"text-sm text-muted-foreground",children:'Click "Add News" to create one.'})]}),!s&&e.map(e=>(0,r.jsxs)(n.Zb,{className:"bg-muted/30",children:[r.jsx(n.Ol,{children:(0,r.jsxs)("div",{className:"flex justify-between items-start gap-4",children:[(0,r.jsxs)("div",{className:"flex-grow space-y-1",children:[r.jsx(d.Label,{htmlFor:`title-${e.id}`,children:"Title"}),r.jsx(o.I,{id:`title-${e.id}`,value:e.title,onChange:t=>R(e.id,"title",t.target.value),disabled:!T,className:"text-lg font-bold"})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[r.jsx(d.Label,{htmlFor:`date-${e.id}`,children:"Date"}),r.jsx(o.I,{id:`date-${e.id}`,type:"date",value:e.date,onChange:t=>R(e.id,"date",t.target.value),disabled:!T,className:"w-fit"})]}),T&&(0,r.jsxs)("div",{className:"flex items-center mt-auto",children:[r.jsx(l.Button,{variant:"ghost",size:"icon",onClick:()=>U(e),title:"Copy Article",children:r.jsx(y.Z,{className:"h-4 w-4 text-blue-600"})}),r.jsx(l.Button,{variant:"ghost",size:"icon",onClick:()=>I(e.id),title:"Delete Article",children:r.jsx(v.Z,{className:"h-4 w-4 text-destructive"})})]})]})}),(0,r.jsxs)(n.aY,{children:[r.jsx(d.Label,{htmlFor:`content-${e.id}`,children:"Content"}),r.jsx(c.g,{id:`content-${e.id}`,value:e.content,onChange:t=>R(e.id,"content",t.target.value),disabled:!T,rows:4})]})]},e.id))]})]})]})}},41291:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(62881).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},13961:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(62881).Z)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},81660:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(62881).Z)("ClipboardPaste",[["path",{d:"M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z",key:"1pp7kr"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2M16 4h2a2 2 0 0 1 2 2v2M11 14h10",key:"2ik1ml"}],["path",{d:"m17 10 4 4-4 4",key:"vp2hj1"}]])},43810:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(62881).Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},31215:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(62881).Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},98091:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(62881).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},12727:(e,t,s)=>{"use strict";s.d(t,{m:()=>a});var r=s(10326);function a({title:e,description:t,children:s}){return(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0 md:space-x-4",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:e}),r.jsx("p",{className:"text-lg text-muted-foreground",children:t})]}),s&&r.jsx("div",{className:"flex-shrink-0",children:s})]})}s(17577)},29752:(e,t,s)=>{"use strict";s.d(t,{Ol:()=>l,SZ:()=>d,Zb:()=>n,aY:()=>c,eW:()=>u,ll:()=>o});var r=s(10326),a=s(17577),i=s(51223);let n=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));n.displayName="Card";let l=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...t}));l.displayName="CardHeader";let o=a.forwardRef(({className:e,...t},s)=>r.jsx("h3",{ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));o.displayName="CardTitle";let d=a.forwardRef(({className:e,...t},s)=>r.jsx("p",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",e),...t}));d.displayName="CardDescription";let c=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,i.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent";let u=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",e),...t}));u.displayName="CardFooter"},41190:(e,t,s)=>{"use strict";s.d(t,{I:()=>n});var r=s(10326),a=s(17577),i=s(51223);let n=a.forwardRef(({className:e,type:t,...s},a)=>r.jsx("input",{type:t,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...s}));n.displayName="Input"},44794:(e,t,s)=>{"use strict";s.d(t,{Label:()=>d});var r=s(10326),a=s(17577),i=s(29152),n=s(79360),l=s(51223);let o=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef(({className:e,...t},s)=>r.jsx(i.f,{ref:s,className:(0,l.cn)(o(),e),...t}));d.displayName=i.f.displayName},38227:(e,t,s)=>{"use strict";s.d(t,{O:()=>i});var r=s(10326),a=s(51223);function i({className:e,...t}){return r.jsx("div",{className:(0,a.cn)("animate-pulse rounded-md bg-muted",e),...t})}},82015:(e,t,s)=>{"use strict";s.d(t,{g:()=>n});var r=s(10326),a=s(17577),i=s(51223);let n=a.forwardRef(({className:e,...t},s)=>r.jsx("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...t}));n.displayName="Textarea"},35221:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>i,default:()=>l});var r=s(68570);let a=(0,r.createProxy)(String.raw`C:\Users\Admin\Desktop\app\app\dashboard\school-info\news\page.tsx`),{__esModule:i,$$typeof:n}=a;a.default;let l=(0,r.createProxy)(String.raw`C:\Users\Admin\Desktop\app\app\dashboard\school-info\news\page.tsx#default`)},29152:(e,t,s)=>{"use strict";s.d(t,{f:()=>o});var r=s(17577);s(60962);var a=s(34214),i=s(10326),n=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let s=(0,a.Z8)(`Primitive.${t}`),n=r.forwardRef((e,r)=>{let{asChild:a,...n}=e,l=a?s:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,i.jsx)(l,{...n,ref:r})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),l=r.forwardRef((e,t)=>(0,i.jsx)(n.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));l.displayName="Label";var o=l}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[8537,434,3121,9082,8578],()=>s(22741));module.exports=r})();