(()=>{var e={};e.id=558,e.ids=[558],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},83122:e=>{"use strict";e.exports=require("undici")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},89071:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c}),r(43726),r(13321),r(85070),r(35866);var s=r(23191),a=r(88716),n=r(37922),i=r.n(n),o=r(95231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let c=["",{children:["dashboard",{children:["academics",{children:["inventory-summary",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,43726)),"C:\\Users\\Admin\\Desktop\\app\\app\\dashboard\\academics\\inventory-summary\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,13321)),"C:\\Users\\Admin\\Desktop\\app\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,85070)),"C:\\Users\\Admin\\Desktop\\app\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\Admin\\Desktop\\app\\app\\dashboard\\academics\\inventory-summary\\page.tsx"],u="/dashboard/academics/inventory-summary/page",h={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/academics/inventory-summary/page",pathname:"/dashboard/academics/inventory-summary",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},31448:(e,t,r)=>{Promise.resolve().then(r.bind(r,14980))},14980:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>P});var s=r(10326),a=r(17577),n=r(29752),i=r(41156),o=r(30660),l=r(49844),c=r(18423),d=r(62637),u=r(9997),h=r(44675),m=r(69274),p=r(8564),x=r(99630),f=r(38227),y=r(84097),g=r(86333),v=r(41291);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let b=(0,r(62881).Z)("PackageSearch",[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["circle",{cx:"18.5",cy:"15.5",r:"2.5",key:"b5zd12"}],["path",{d:"M20.27 17.27 22 19",key:"1l4muz"}]]);var j=r(51223),N=r(12727),w=r(76025),C=r(76),k=r(91664),S=r(35047);async function q(e){if(!w.db)throw Error("Firestore is not configured.");let t=(0,C.hJ)(w.db,`schools/${e}/classroomInventory`),r=(0,C.IO)(t);return(await (0,C.PL)(r)).docs.map(e=>e.data())}let O=e=>{let t=new Map;for(let r of e)for(let e of r.items){let r=t.get(e.itemName)||{start:0,added:0,lost:0};r.start+=Number(e.quantityStart)||0,r.added+=Number(e.quantityAdded)||0,r.lost+=Number(e.quantityLost)||0,t.set(e.itemName,r)}return Array.from(t.entries()).map(([e,t])=>{let r=t.start+t.added-t.lost,s=t.added-t.lost;return{name:e,...t,current:r,netChange:s}})};function P(){let{toast:e}=(0,y.pm)(),t=(0,S.useRouter)(),[r,C]=(0,a.useState)([]),[P,A]=(0,a.useState)(!0),[R,D]=(0,a.useState)(null),[T,Z]=(0,a.useState)(null),[_,E]=(0,a.useState)(null);(0,a.useCallback)(async()=>{if(!T){w.W&&D("School ID not found."),A(!1);return}if("head-teacher"!==_&&"primary-admin"!==_&&"system-admin"!==_){D("You do not have permission to view this page."),A(!1);return}A(!0),D(null);try{let e=await q(T),t=O(e);C(t)}catch(r){let t=r instanceof Error?r.message:"Failed to load summary data.";D(t),e({variant:"destructive",title:"Error Loading Data",description:t})}finally{A(!1)}},[T,_,e]);let M=(0,a.useMemo)(()=>r.map(e=>({name:e.name.split(" ")[0],"Current Stock":e.current})),[r]),H=(0,a.useMemo)(()=>r.filter(e=>0!==e.netChange).map(e=>({name:e.name.split(" ")[0],netChange:e.netChange})),[r]);return(0,s.jsxs)("div",{className:"p-8 space-y-8",children:[s.jsx(N.m,{title:"Classroom Inventory Summary",description:`An aggregated view of all classroom stock across all year levels. ${T?` (School ID: ${T})`:""}`,children:(0,s.jsxs)(k.Button,{variant:"outline",onClick:()=>t.push("/dashboard/academics/classroom-inventory"),children:[s.jsx(g.Z,{className:"mr-2 h-4 w-4"}),"Back to Inventory Entry"]})}),(0,s.jsxs)("div",{className:"space-y-8",children:[P&&(0,s.jsxs)("div",{className:"space-y-4",children:[s.jsx(f.O,{className:"h-64 w-full"}),s.jsx(f.O,{className:"h-48 w-full"})]}),R&&(0,s.jsxs)(n.Zb,{className:"bg-destructive/10 border-destructive",children:[s.jsx(n.Ol,{children:(0,s.jsxs)(n.ll,{className:"font-headline text-destructive flex items-center",children:[s.jsx(v.Z,{className:"mr-2 h-5 w-5"})," Error"]})}),s.jsx(n.aY,{children:s.jsx("p",{className:"font-body text-destructive",children:R})})]}),!P&&!R&&0===r.length&&s.jsx(n.Zb,{className:"flex items-center justify-center min-h-[400px]",children:(0,s.jsxs)(n.aY,{className:"text-center",children:[s.jsx(b,{className:"mx-auto h-12 w-12 text-muted-foreground"}),s.jsx("h3",{className:"mt-4 text-lg font-medium",children:"No Inventory Data"}),s.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:"No classroom inventory has been recorded for this school yet."})]})}),!P&&!R&&r.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,s.jsxs)(n.Zb,{children:[(0,s.jsxs)(n.Ol,{children:[s.jsx(n.ll,{children:"Current Stock Levels"}),s.jsx(n.SZ,{children:"Visual representation of current inventory."})]}),s.jsx(n.aY,{children:s.jsx(o.h,{width:"100%",height:300,children:(0,s.jsxs)(l.v,{data:M,children:[s.jsx(c.q,{strokeDasharray:"3 3"}),s.jsx(d.K,{dataKey:"name",angle:-45,textAnchor:"end",height:80,interval:0,fontSize:12}),s.jsx(u.B,{}),s.jsx(h.u,{}),s.jsx(m.D,{}),s.jsx(p.$,{dataKey:"Current Stock",fill:"hsl(var(--primary))"})]})})})]}),(0,s.jsxs)(n.Zb,{children:[(0,s.jsxs)(n.Ol,{children:[s.jsx(n.ll,{children:"Net Change in Stock"}),s.jsx(n.SZ,{children:"Changes in inventory levels over the term (Added - Lost)."})]}),s.jsx(n.aY,{children:s.jsx(o.h,{width:"100%",height:300,children:(0,s.jsxs)(l.v,{data:H,children:[s.jsx(c.q,{strokeDasharray:"3 3"}),s.jsx(d.K,{dataKey:"name",angle:-45,textAnchor:"end",height:80,interval:0,fontSize:12}),s.jsx(u.B,{}),s.jsx(h.u,{}),s.jsx(m.D,{}),s.jsx(p.$,{dataKey:"netChange",name:"Net Change",children:H.map((e,t)=>s.jsx(x.b,{fill:e.netChange>=0?"hsl(var(--chart-2))":"hsl(var(--destructive))"},`cell-${t}`))})]})})})]})]}),(0,s.jsxs)(n.Zb,{children:[s.jsx(n.Ol,{children:s.jsx(n.ll,{children:"Detailed Inventory Breakdown"})}),s.jsx(n.aY,{children:s.jsx("div",{className:"overflow-x-auto rounded-md border",children:(0,s.jsxs)(i.iA,{children:[s.jsx(i.xD,{children:(0,s.jsxs)(i.SC,{children:[s.jsx(i.ss,{children:"Item Name"}),s.jsx(i.ss,{className:"text-right",children:"Total at Term Start"}),s.jsx(i.ss,{className:"text-right",children:"Total Added"}),s.jsx(i.ss,{className:"text-right",children:"Total Lost/Damaged"}),s.jsx(i.ss,{className:"text-right",children:"Net Change"}),s.jsx(i.ss,{className:"text-right font-bold",children:"Total Current Stock"})]})}),s.jsx(i.RM,{children:r.map(e=>(0,s.jsxs)(i.SC,{children:[s.jsx(i.pj,{className:"font-medium",children:e.name}),s.jsx(i.pj,{className:"text-right",children:e.start}),(0,s.jsxs)(i.pj,{className:"text-right text-green-600",children:["+",e.added]}),(0,s.jsxs)(i.pj,{className:"text-right text-destructive",children:["-",e.lost]}),s.jsx(i.pj,{className:(0,j.cn)("text-right font-bold",e.netChange>0?"text-green-600":e.netChange<0?"text-destructive":"text-muted-foreground"),children:e.netChange>0?`+${e.netChange}`:e.netChange}),s.jsx(i.pj,{className:"text-right font-bold",children:e.current})]},e.name))})]})})})]})]})]})]})}},86333:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(62881).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},41291:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(62881).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},30660:(e,t,r)=>{"use strict";r.d(t,{h:()=>x});var s=r(41135),a=r(17577),n=r.n(a),i=r(69450),o=r.n(i),l=r(2645),c=r(31306),d=r(2656);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach(function(t){var s,a;s=t,a=r[t],(s=function(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=u(s))return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:t+""}(s))in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,s=Array(t);r<t;r++)s[r]=e[r];return s}var x=(0,a.forwardRef)(function(e,t){var r,i=e.aspect,u=e.initialDimension,h=void 0===u?{width:-1,height:-1}:u,x=e.width,f=void 0===x?"100%":x,y=e.height,g=void 0===y?"100%":y,v=e.minWidth,b=void 0===v?0:v,j=e.minHeight,N=e.maxHeight,w=e.children,C=e.debounce,k=void 0===C?0:C,S=e.id,q=e.className,O=e.onResize,P=e.style,A=(0,a.useRef)(null),R=(0,a.useRef)();R.current=O,(0,a.useImperativeHandle)(t,function(){return Object.defineProperty(A.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),A.current},configurable:!0})});var D=function(e){if(Array.isArray(e))return e}(r=(0,a.useState)({containerWidth:h.width,containerHeight:h.height}))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var s,a,n,i,o=[],l=!0,c=!1;try{for(n=(r=r.call(e)).next;!(l=(s=n.call(r)).done)&&(o.push(s.value),2!==o.length);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(r,2)||function(e,t){if(e){if("string"==typeof e)return p(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,2)}}(r,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),T=D[0],Z=D[1],_=(0,a.useCallback)(function(e,t){Z(function(r){var s=Math.round(e),a=Math.round(t);return r.containerWidth===s&&r.containerHeight===a?r:{containerWidth:s,containerHeight:a}})},[]);(0,a.useEffect)(function(){var e=function(e){var t,r=e[0].contentRect,s=r.width,a=r.height;_(s,a),null===(t=R.current)||void 0===t||t.call(R,s,a)};k>0&&(e=o()(e,k,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),r=A.current.getBoundingClientRect();return _(r.width,r.height),t.observe(A.current),function(){t.disconnect()}},[_,k]);var E=(0,a.useMemo)(function(){var e=T.containerWidth,t=T.containerHeight;if(e<0||t<0)return null;(0,c.Z)((0,l.hU)(f)||(0,l.hU)(g),"The width(%s) and height(%s) are both fixed numbers,\n       maybe you don't need to use a ResponsiveContainer.",f,g),(0,c.Z)(!i||i>0,"The aspect(%s) must be greater than zero.",i);var r=(0,l.hU)(f)?e:f,s=(0,l.hU)(g)?t:g;i&&i>0&&(r?s=r/i:s&&(r=s*i),N&&s>N&&(s=N)),(0,c.Z)(r>0||s>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",r,s,f,g,b,j,i);var o=!Array.isArray(w)&&(0,d.Gf)(w.type).endsWith("Chart");return n().Children.map(w,function(e){return n().isValidElement(e)?(0,a.cloneElement)(e,m({width:r,height:s},o?{style:m({height:"100%",width:"100%",maxHeight:s,maxWidth:r},e.props.style)}:{})):e})},[i,w,g,N,j,b,T,f]);return n().createElement("div",{id:S?"".concat(S):void 0,className:(0,s.Z)("recharts-responsive-container",q),style:m(m({},void 0===P?{}:P),{},{width:f,height:g,minWidth:b,minHeight:j,maxHeight:N}),ref:A},E)})},12727:(e,t,r)=>{"use strict";r.d(t,{m:()=>a});var s=r(10326);function a({title:e,description:t,children:r}){return(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0 md:space-x-4",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:e}),s.jsx("p",{className:"text-lg text-muted-foreground",children:t})]}),r&&s.jsx("div",{className:"flex-shrink-0",children:r})]})}r(17577)},29752:(e,t,r)=>{"use strict";r.d(t,{Ol:()=>o,SZ:()=>c,Zb:()=>i,aY:()=>d,eW:()=>u,ll:()=>l});var s=r(10326),a=r(17577),n=r(51223);let i=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));i.displayName="Card";let o=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...t}));o.displayName="CardHeader";let l=a.forwardRef(({className:e,...t},r)=>s.jsx("h3",{ref:r,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));l.displayName="CardTitle";let c=a.forwardRef(({className:e,...t},r)=>s.jsx("p",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",e),...t}));c.displayName="CardDescription";let d=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,n.cn)("p-6 pt-0",e),...t}));d.displayName="CardContent";let u=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",e),...t}));u.displayName="CardFooter"},38227:(e,t,r)=>{"use strict";r.d(t,{O:()=>n});var s=r(10326),a=r(51223);function n({className:e,...t}){return s.jsx("div",{className:(0,a.cn)("animate-pulse rounded-md bg-muted",e),...t})}},41156:(e,t,r)=>{"use strict";r.d(t,{RM:()=>l,SC:()=>c,iA:()=>i,pj:()=>u,ss:()=>d,xD:()=>o});var s=r(10326),a=r(17577),n=r(51223);let i=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:r,className:(0,n.cn)("w-full caption-bottom text-sm",e),...t})}));i.displayName="Table";let o=a.forwardRef(({className:e,...t},r)=>s.jsx("thead",{ref:r,className:(0,n.cn)("[&_tr]:border-b",e),...t}));o.displayName="TableHeader";let l=a.forwardRef(({className:e,...t},r)=>s.jsx("tbody",{ref:r,className:(0,n.cn)("[&_tr:last-child]:border-0",e),...t}));l.displayName="TableBody",a.forwardRef(({className:e,...t},r)=>s.jsx("tfoot",{ref:r,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let c=a.forwardRef(({className:e,...t},r)=>s.jsx("tr",{ref:r,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));c.displayName="TableRow";let d=a.forwardRef(({className:e,...t},r)=>s.jsx("th",{ref:r,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));d.displayName="TableHead";let u=a.forwardRef(({className:e,...t},r)=>s.jsx("td",{ref:r,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));u.displayName="TableCell",a.forwardRef(({className:e,...t},r)=>s.jsx("caption",{ref:r,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption"},43726:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>o});var s=r(68570);let a=(0,s.createProxy)(String.raw`C:\Users\Admin\Desktop\app\app\dashboard\academics\inventory-summary\page.tsx`),{__esModule:n,$$typeof:i}=a;a.default;let o=(0,s.createProxy)(String.raw`C:\Users\Admin\Desktop\app\app\dashboard\academics\inventory-summary\page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[8537,434,3121,9082,2748,8578],()=>r(89071));module.exports=s})();