(()=>{var e={};e.id=9342,e.ids=[9342],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},83122:e=>{"use strict";e.exports=require("undici")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},90594:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>d}),r(26152),r(13321),r(85070),r(35866);var a=r(23191),s=r(88716),n=r(37922),i=r.n(n),o=r(95231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d=["",{children:["dashboard",{children:["inventory",{children:["summary",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,26152)),"C:\\Users\\Admin\\Desktop\\app\\app\\dashboard\\inventory\\summary\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,13321)),"C:\\Users\\Admin\\Desktop\\app\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,85070)),"C:\\Users\\Admin\\Desktop\\app\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\Admin\\Desktop\\app\\app\\dashboard\\inventory\\summary\\page.tsx"],u="/dashboard/inventory/summary/page",m={require:r,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/dashboard/inventory/summary/page",pathname:"/dashboard/inventory/summary",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},53283:(e,t,r)=>{Promise.resolve().then(r.bind(r,7958))},7958:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>O});var a=r(10326),s=r(17577),n=r(29752),i=r(41156),o=r(30660),l=r(49844),d=r(18423),c=r(62637),u=r(9997),m=r(44675),h=r(69274),p=r(8564),x=r(38227),f=r(84097),y=r(86333),b=r(41291),g=r(12727),v=r(76025),j=r(76),N=r(91664),w=r(35047);async function S(e){if(!v.db)throw Error("Firestore is not configured.");let t=(0,j.hJ)(v.db,"schools",e,"primaryInventory");return(await (0,j.PL)(t)).docs.map(e=>{let t=e.data();return{id:e.id,itemName:t.itemName||"Unnamed Item",quantity:t.quantity||0,value:t.value||0,remarks:t.remarks||"",lastUpdatedBy:t.lastUpdatedBy||"N/A",updatedAt:t.updatedAt instanceof j.EK?t.updatedAt.toDate().toISOString():new Date().toISOString(),createdAt:t.createdAt instanceof j.EK?t.createdAt.toDate().toISOString():new Date().toISOString()}})}function O(){let{toast:e}=(0,f.pm)(),t=(0,w.useRouter)(),[r,j]=(0,s.useState)([]),[O,q]=(0,s.useState)(!0),[k,P]=(0,s.useState)(null),[A,C]=(0,s.useState)(null),[D,R]=(0,s.useState)(null),[T,E]=(0,s.useState)("");(0,s.useCallback)(async()=>{if(q(!0),P(null),E(new Date().toLocaleString()),!v.W||!v.db){q(!1),P("Firebase is not configured.");return}if(!A){P("School ID not found."),q(!1);return}if("head-teacher"!==D&&"primary-admin"!==D&&"system-admin"!==D){P("You do not have permission to view this page."),q(!1);return}try{let e=await S(A);j(e)}catch(r){let t=r instanceof Error?r.message:"Failed to load summary data.";P(t),e({variant:"destructive",title:"Error Loading Data",description:t})}finally{q(!1)}},[e,A,D]);let I=(0,s.useMemo)(()=>r.map(e=>({name:e.itemName,"Total Value":(Number(e.quantity)||0)*(Number(e.value)||0)})).filter(e=>e["Total Value"]>0),[r]),Z=(0,s.useMemo)(()=>r.reduce((e,t)=>e+(Number(t.quantity)||0)*(Number(t.value)||0),0),[r]);return(0,a.jsxs)("div",{className:"p-8 space-y-8",children:[a.jsx(g.m,{title:"Primary School Inventory Summary",description:`An aggregated view of all primary school assets and their total value.${A?` (School ID: ${A})`:""}`,children:(0,a.jsxs)(N.Button,{variant:"outline",onClick:()=>t.push("/dashboard/inventory"),children:[a.jsx(y.Z,{className:"mr-2 h-4 w-4"}),"Back to Inventory Entry"]})}),(0,a.jsxs)(n.Zb,{className:"shadow-xl rounded-lg w-full max-w-6xl mx-auto",children:[(0,a.jsxs)(n.Ol,{children:[a.jsx(n.ll,{className:"text-2xl font-headline text-primary",children:"Inventory Overview"}),(0,a.jsxs)(n.SZ,{className:"font-body text-xs text-muted-foreground pt-1",children:["Last Updated: ",T]})]}),(0,a.jsxs)(n.aY,{className:"space-y-8",children:[O&&(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx(x.O,{className:"h-20 w-1/3"}),a.jsx(x.O,{className:"h-64 w-full"}),a.jsx(x.O,{className:"h-48 w-full"})]}),k&&(0,a.jsxs)(n.Zb,{className:"bg-destructive/10 border-destructive",children:[a.jsx(n.Ol,{children:(0,a.jsxs)(n.ll,{className:"font-headline text-destructive flex items-center",children:[a.jsx(b.Z,{className:"mr-2 h-5 w-5"})," Error"]})}),a.jsx(n.aY,{children:a.jsx("p",{className:"font-body text-destructive",children:k})})]}),!O&&!k&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.Zb,{className:"bg-muted/50",children:[a.jsx(n.Ol,{children:a.jsx(n.ll,{children:"Total Estimated Inventory Value"})}),a.jsx(n.aY,{children:(0,a.jsxs)("p",{className:"text-4xl font-bold text-primary",children:["$",Z.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[a.jsx(n.ll,{children:"Inventory Value by Item"}),a.jsx(n.SZ,{children:"Visual representation of total value per item type."})]}),a.jsx(n.aY,{children:a.jsx(o.h,{width:"100%",height:400,children:(0,a.jsxs)(l.v,{data:I,layout:"vertical",margin:{top:5,right:30,left:20,bottom:5},children:[a.jsx(d.q,{strokeDasharray:"3 3"}),a.jsx(c.K,{type:"number"}),a.jsx(u.B,{dataKey:"name",type:"category",width:150,tick:{fontSize:12}}),a.jsx(m.u,{formatter:e=>`$${e.toLocaleString()}`}),a.jsx(h.D,{}),a.jsx(p.$,{dataKey:"Total Value",fill:"hsl(var(--primary))"})]})})})]}),(0,a.jsxs)(n.Zb,{children:[a.jsx(n.Ol,{children:a.jsx(n.ll,{children:"Detailed Inventory Breakdown"})}),a.jsx(n.aY,{className:"max-h-[450px] overflow-y-auto",children:(0,a.jsxs)(i.iA,{children:[a.jsx(i.xD,{children:(0,a.jsxs)(i.SC,{children:[a.jsx(i.ss,{children:"Item Name"}),a.jsx(i.ss,{className:"text-right",children:"Quantity"}),a.jsx(i.ss,{className:"text-right",children:"Value (each)"}),a.jsx(i.ss,{className:"text-right font-bold",children:"Total Value"})]})}),a.jsx(i.RM,{children:r.map(e=>(0,a.jsxs)(i.SC,{children:[a.jsx(i.pj,{className:"font-medium",children:e.itemName}),a.jsx(i.pj,{className:"text-right",children:e.quantity}),(0,a.jsxs)(i.pj,{className:"text-right",children:["$",Number(e.value).toFixed(2)]}),(0,a.jsxs)(i.pj,{className:"text-right font-bold",children:["$",((Number(e.quantity)||0)*(Number(e.value)||0)).toFixed(2)]})]},e.id))})]})})]})]})]})]})]})]})}},86333:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(62881).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},41291:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(62881).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},30660:(e,t,r)=>{"use strict";r.d(t,{h:()=>x});var a=r(41135),s=r(17577),n=r.n(s),i=r(69450),o=r.n(i),l=r(2645),d=r(31306),c=r(2656);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach(function(t){var a,s;a=t,s=r[t],(a=function(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=u(a))return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:t+""}(a))in e?Object.defineProperty(e,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[a]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}var x=(0,s.forwardRef)(function(e,t){var r,i=e.aspect,u=e.initialDimension,m=void 0===u?{width:-1,height:-1}:u,x=e.width,f=void 0===x?"100%":x,y=e.height,b=void 0===y?"100%":y,g=e.minWidth,v=void 0===g?0:g,j=e.minHeight,N=e.maxHeight,w=e.children,S=e.debounce,O=void 0===S?0:S,q=e.id,k=e.className,P=e.onResize,A=e.style,C=(0,s.useRef)(null),D=(0,s.useRef)();D.current=P,(0,s.useImperativeHandle)(t,function(){return Object.defineProperty(C.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),C.current},configurable:!0})});var R=function(e){if(Array.isArray(e))return e}(r=(0,s.useState)({containerWidth:m.width,containerHeight:m.height}))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,s,n,i,o=[],l=!0,d=!1;try{for(n=(r=r.call(e)).next;!(l=(a=n.call(r)).done)&&(o.push(a.value),2!==o.length);l=!0);}catch(e){d=!0,s=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(d)throw s}}return o}}(r,2)||function(e,t){if(e){if("string"==typeof e)return p(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,2)}}(r,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),T=R[0],E=R[1],I=(0,s.useCallback)(function(e,t){E(function(r){var a=Math.round(e),s=Math.round(t);return r.containerWidth===a&&r.containerHeight===s?r:{containerWidth:a,containerHeight:s}})},[]);(0,s.useEffect)(function(){var e=function(e){var t,r=e[0].contentRect,a=r.width,s=r.height;I(a,s),null===(t=D.current)||void 0===t||t.call(D,a,s)};O>0&&(e=o()(e,O,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),r=C.current.getBoundingClientRect();return I(r.width,r.height),t.observe(C.current),function(){t.disconnect()}},[I,O]);var Z=(0,s.useMemo)(function(){var e=T.containerWidth,t=T.containerHeight;if(e<0||t<0)return null;(0,d.Z)((0,l.hU)(f)||(0,l.hU)(b),"The width(%s) and height(%s) are both fixed numbers,\n       maybe you don't need to use a ResponsiveContainer.",f,b),(0,d.Z)(!i||i>0,"The aspect(%s) must be greater than zero.",i);var r=(0,l.hU)(f)?e:f,a=(0,l.hU)(b)?t:b;i&&i>0&&(r?a=r/i:a&&(r=a*i),N&&a>N&&(a=N)),(0,d.Z)(r>0||a>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",r,a,f,b,v,j,i);var o=!Array.isArray(w)&&(0,c.Gf)(w.type).endsWith("Chart");return n().Children.map(w,function(e){return n().isValidElement(e)?(0,s.cloneElement)(e,h({width:r,height:a},o?{style:h({height:"100%",width:"100%",maxHeight:a,maxWidth:r},e.props.style)}:{})):e})},[i,w,b,N,j,v,T,f]);return n().createElement("div",{id:q?"".concat(q):void 0,className:(0,a.Z)("recharts-responsive-container",k),style:h(h({},void 0===A?{}:A),{},{width:f,height:b,minWidth:v,minHeight:j,maxHeight:N}),ref:C},Z)})},12727:(e,t,r)=>{"use strict";r.d(t,{m:()=>s});var a=r(10326);function s({title:e,description:t,children:r}){return(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0 md:space-x-4",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:e}),a.jsx("p",{className:"text-lg text-muted-foreground",children:t})]}),r&&a.jsx("div",{className:"flex-shrink-0",children:r})]})}r(17577)},29752:(e,t,r)=>{"use strict";r.d(t,{Ol:()=>o,SZ:()=>d,Zb:()=>i,aY:()=>c,eW:()=>u,ll:()=>l});var a=r(10326),s=r(17577),n=r(51223);let i=s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));i.displayName="Card";let o=s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...t}));o.displayName="CardHeader";let l=s.forwardRef(({className:e,...t},r)=>a.jsx("h3",{ref:r,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));l.displayName="CardTitle";let d=s.forwardRef(({className:e,...t},r)=>a.jsx("p",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",e),...t}));d.displayName="CardDescription";let c=s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,n.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent";let u=s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",e),...t}));u.displayName="CardFooter"},38227:(e,t,r)=>{"use strict";r.d(t,{O:()=>n});var a=r(10326),s=r(51223);function n({className:e,...t}){return a.jsx("div",{className:(0,s.cn)("animate-pulse rounded-md bg-muted",e),...t})}},41156:(e,t,r)=>{"use strict";r.d(t,{RM:()=>l,SC:()=>d,iA:()=>i,pj:()=>u,ss:()=>c,xD:()=>o});var a=r(10326),s=r(17577),n=r(51223);let i=s.forwardRef(({className:e,...t},r)=>a.jsx("div",{className:"relative w-full overflow-auto",children:a.jsx("table",{ref:r,className:(0,n.cn)("w-full caption-bottom text-sm",e),...t})}));i.displayName="Table";let o=s.forwardRef(({className:e,...t},r)=>a.jsx("thead",{ref:r,className:(0,n.cn)("[&_tr]:border-b",e),...t}));o.displayName="TableHeader";let l=s.forwardRef(({className:e,...t},r)=>a.jsx("tbody",{ref:r,className:(0,n.cn)("[&_tr:last-child]:border-0",e),...t}));l.displayName="TableBody",s.forwardRef(({className:e,...t},r)=>a.jsx("tfoot",{ref:r,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let d=s.forwardRef(({className:e,...t},r)=>a.jsx("tr",{ref:r,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));d.displayName="TableRow";let c=s.forwardRef(({className:e,...t},r)=>a.jsx("th",{ref:r,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));c.displayName="TableHead";let u=s.forwardRef(({className:e,...t},r)=>a.jsx("td",{ref:r,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));u.displayName="TableCell",s.forwardRef(({className:e,...t},r)=>a.jsx("caption",{ref:r,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption"},26152:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>o});var a=r(68570);let s=(0,a.createProxy)(String.raw`C:\Users\Admin\Desktop\app\app\dashboard\inventory\summary\page.tsx`),{__esModule:n,$$typeof:i}=s;s.default;let o=(0,a.createProxy)(String.raw`C:\Users\Admin\Desktop\app\app\dashboard\inventory\summary\page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[8537,434,3121,9082,2748,8578],()=>r(90594));module.exports=a})();