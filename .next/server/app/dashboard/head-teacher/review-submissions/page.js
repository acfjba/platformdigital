(()=>{var e={};e.id=822,e.ids=[822],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},83122:e=>{"use strict";e.exports=require("undici")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},64738:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>d.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>l}),s(63853),s(13321),s(85070),s(35866);var r=s(23191),a=s(88716),i=s(37922),d=s.n(i),o=s(95231),n={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);s.d(t,n);let l=["",{children:["dashboard",{children:["head-teacher",{children:["review-submissions",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,63853)),"C:\\Users\\Admin\\Desktop\\app\\app\\dashboard\\head-teacher\\review-submissions\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,13321)),"C:\\Users\\Admin\\Desktop\\app\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,85070)),"C:\\Users\\Admin\\Desktop\\app\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\Admin\\Desktop\\app\\app\\dashboard\\head-teacher\\review-submissions\\page.tsx"],u="/dashboard/head-teacher/review-submissions/page",p={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/head-teacher/review-submissions/page",pathname:"/dashboard/head-teacher/review-submissions",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},82718:(e,t,s)=>{Promise.resolve().then(s.bind(s,9050))},9050:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>N});var r=s(10326),a=s(17577),i=s(29752),d=s(91664),o=s(41156),n=s(12714),l=s(77506),c=s(69669),u=s(30361),p=s(84097),m=s(38227),x=s(12727),f=s(76025),h=s(76),b=s(38443),j=s(24118),y=s(82015),g=s(44794);async function v(e){if(!f.db)throw Error("Firestore is not configured.");let t=(0,h.hJ)(f.db,"workbookPlans"),s=(0,h.IO)(t,(0,h.ar)("schoolId","==",e),(0,h.ar)("status","in",["Submitted","Approved","Rejected"]));return(await (0,h.PL)(s)).docs.map(e=>{let t=e.data();return{id:e.id,teacherName:t.teacherName,teacherId:t.teacherId,yearOfStudy:t.yearOfStudy,term:t.term,week:t.week,status:t.status,submittedAt:t.submittedAt instanceof h.EK?t.submittedAt.toDate().toLocaleString():"N/A",...t}})}async function w(e,t,s){if(!f.db)throw Error("Firestore is not configured.");let r=(0,h.JU)(f.db,"workbookPlans",e);await (0,h.r7)(r,{status:t,headTeacherFeedback:s,reviewedAt:(0,h.Bt)()})}function N(){let{toast:e}=(0,p.pm)(),[t,s]=(0,a.useState)([]),[f,h]=(0,a.useState)(!0),[N,k]=(0,a.useState)(null),[C,R]=(0,a.useState)(null),[S,q]=(0,a.useState)(null),[P,A]=(0,a.useState)(!1),[D,Z]=(0,a.useState)(""),[_,T]=(0,a.useState)(!1),$=(0,a.useCallback)(async e=>{h(!0),k(null);try{let t=await v(e);s(t)}catch(e){k(e instanceof Error?e.message:"Failed to load submissions.")}finally{h(!1)}},[]),z=e=>{q(e),Z(e.headTeacherFeedback||""),A(!0)},M=async t=>{if(S){T(!0);try{await w(S.id,t,D),e({title:"Success",description:`Plan has been ${t.toLowerCase()}.`}),A(!1),C&&$(C)}catch(t){e({variant:"destructive",title:"Error",description:"Could not update plan status."})}finally{T(!1)}}},O=e=>{switch(e){case"Approved":return"default";case"Rejected":return"destructive";case"Submitted":return"secondary";default:return"outline"}};return(0,r.jsxs)("div",{className:"p-8 space-y-8",children:[r.jsx(x.m,{title:"Review Workbook Plan Submissions",description:"Review, approve, or reject workbook plans submitted by teachers."}),(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{children:[r.jsx(i.ll,{children:"Submission Queue"}),r.jsx(i.SZ,{children:"All submitted workbook plans for your school."})]}),(0,r.jsxs)(i.aY,{children:[f&&r.jsx(m.O,{className:"h-48 w-full"}),N&&r.jsx("p",{className:"text-destructive",children:N}),!f&&!N&&r.jsx("div",{className:"overflow-x-auto rounded-md border",children:(0,r.jsxs)(o.iA,{children:[r.jsx(o.xD,{children:(0,r.jsxs)(o.SC,{children:[r.jsx(o.ss,{children:"Date Submitted"}),r.jsx(o.ss,{children:"Teacher"}),r.jsx(o.ss,{children:"Year/Term/Week"}),r.jsx(o.ss,{children:"Status"}),r.jsx(o.ss,{className:"text-right",children:"Actions"})]})}),r.jsx(o.RM,{children:0===t.length?r.jsx(o.SC,{children:r.jsx(o.pj,{colSpan:5,className:"text-center h-24",children:"No submissions found."})}):t.map(e=>(0,r.jsxs)(o.SC,{children:[r.jsx(o.pj,{children:e.submittedAt}),r.jsx(o.pj,{children:e.teacherName}),r.jsx(o.pj,{children:`Y${e.yearOfStudy} / T${e.term} / W${e.week}`}),r.jsx(o.pj,{children:r.jsx(b.C,{variant:O(e.status),children:e.status})}),r.jsx(o.pj,{className:"text-right",children:(0,r.jsxs)(d.Button,{variant:"outline",size:"sm",onClick:()=>z(e),children:[r.jsx(n.Z,{className:"mr-2 h-4 w-4"})," Review"]})})]},e.id))})]})})]})]}),r.jsx(j.Vq,{open:P,onOpenChange:A,children:(0,r.jsxs)(j.cZ,{className:"max-w-4xl",children:[(0,r.jsxs)(j.fK,{children:[(0,r.jsxs)(j.$N,{children:["Review Plan for: ",S?.teacherName]}),r.jsx(j.Be,{children:`Year ${S?.yearOfStudy} / Term ${S?.term} / Week ${S?.week}`})]}),(0,r.jsxs)("div",{className:"max-h-[60vh] overflow-y-auto p-4 border rounded-md my-4 space-y-4",children:[r.jsx("h3",{className:"font-bold",children:"Weekly Remarks:"}),r.jsx("p",{className:"text-sm whitespace-pre-wrap bg-muted p-2 rounded-md",children:S?.weeklyRemarks}),S?.dailyPlans?.map(e=>r.jsxs("div",{children:[r.jsxs("h4",{className:"font-bold text-primary",children:[e.day," (",e.date,")"]}),r.jsxs(o.iA,{children:[r.jsx(o.xD,{children:r.jsxs(o.SC,{children:[r.jsx(o.ss,{children:"Activity"}),r.jsx(o.ss,{children:"Details"})]})}),r.jsx(o.RM,{children:e.activities?.map(e=>r.jsxs(o.SC,{children:[r.jsx(o.pj,{className:"font-medium w-1/3",children:e.label}),r.jsx(o.pj,{className:"whitespace-pre-wrap w-2/3",children:e.curriculumDetails})]},e.id))})]})]},e.day))]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(g.Label,{htmlFor:"feedback",children:"Feedback / Comments"}),r.jsx(y.g,{id:"feedback",placeholder:"Provide feedback for the teacher...",value:D,onChange:e=>Z(e.target.value),rows:4})]}),(0,r.jsxs)(j.cN,{children:[r.jsx(j.GG,{asChild:!0,children:r.jsx(d.Button,{type:"button",variant:"outline",children:"Cancel"})}),(0,r.jsxs)(d.Button,{type:"button",variant:"destructive",onClick:()=>M("Rejected"),disabled:_,children:[_?r.jsx(l.Z,{className:"mr-2 h-4 w-4 animate-spin"}):r.jsx(c.Z,{className:"mr-2 h-4 w-4"}),"Reject"]}),(0,r.jsxs)(d.Button,{type:"button",onClick:()=>M("Approved"),disabled:_,children:[_?r.jsx(l.Z,{className:"mr-2 h-4 w-4 animate-spin"}):r.jsx(u.Z,{className:"mr-2 h-4 w-4"}),"Approve"]})]})]})})]})}},30361:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(62881).Z)("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},69669:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(62881).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},12714:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(62881).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},12727:(e,t,s)=>{"use strict";s.d(t,{m:()=>a});var r=s(10326);function a({title:e,description:t,children:s}){return(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0 md:space-x-4",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:e}),r.jsx("p",{className:"text-lg text-muted-foreground",children:t})]}),s&&r.jsx("div",{className:"flex-shrink-0",children:s})]})}s(17577)},38443:(e,t,s)=>{"use strict";s.d(t,{C:()=>o});var r=s(10326);s(17577);var a=s(79360),i=s(51223);let d=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o({className:e,variant:t,...s}){return r.jsx("div",{className:(0,i.cn)(d({variant:t}),e),...s})}},29752:(e,t,s)=>{"use strict";s.d(t,{Ol:()=>o,SZ:()=>l,Zb:()=>d,aY:()=>c,eW:()=>u,ll:()=>n});var r=s(10326),a=s(17577),i=s(51223);let d=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));d.displayName="Card";let o=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...t}));o.displayName="CardHeader";let n=a.forwardRef(({className:e,...t},s)=>r.jsx("h3",{ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));n.displayName="CardTitle";let l=a.forwardRef(({className:e,...t},s)=>r.jsx("p",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",e),...t}));l.displayName="CardDescription";let c=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,i.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent";let u=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",e),...t}));u.displayName="CardFooter"},24118:(e,t,s)=>{"use strict";s.d(t,{$N:()=>f,Be:()=>h,GG:()=>c,Vq:()=>n,cN:()=>x,cZ:()=>p,fK:()=>m});var r=s(10326),a=s(17577),i=s(89131),d=s(94019),o=s(51223);let n=i.fC;i.xz;let l=i.h_,c=i.x8,u=a.forwardRef(({className:e,...t},s)=>r.jsx(i.aV,{ref:s,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));u.displayName=i.aV.displayName;let p=a.forwardRef(({className:e,children:t,...s},a)=>(0,r.jsxs)(l,{children:[r.jsx(u,{}),(0,r.jsxs)(i.VY,{ref:a,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s,children:[t,(0,r.jsxs)(i.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[r.jsx(d.Z,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));p.displayName=i.VY.displayName;let m=({className:e,...t})=>r.jsx("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});m.displayName="DialogHeader";let x=({className:e,...t})=>r.jsx("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});x.displayName="DialogFooter";let f=a.forwardRef(({className:e,...t},s)=>r.jsx(i.Dx,{ref:s,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));f.displayName=i.Dx.displayName;let h=a.forwardRef(({className:e,...t},s)=>r.jsx(i.dk,{ref:s,className:(0,o.cn)("text-sm text-muted-foreground",e),...t}));h.displayName=i.dk.displayName},44794:(e,t,s)=>{"use strict";s.d(t,{Label:()=>l});var r=s(10326),a=s(17577),i=s(29152),d=s(79360),o=s(51223);let n=(0,d.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=a.forwardRef(({className:e,...t},s)=>r.jsx(i.f,{ref:s,className:(0,o.cn)(n(),e),...t}));l.displayName=i.f.displayName},38227:(e,t,s)=>{"use strict";s.d(t,{O:()=>i});var r=s(10326),a=s(51223);function i({className:e,...t}){return r.jsx("div",{className:(0,a.cn)("animate-pulse rounded-md bg-muted",e),...t})}},41156:(e,t,s)=>{"use strict";s.d(t,{RM:()=>n,SC:()=>l,iA:()=>d,pj:()=>u,ss:()=>c,xD:()=>o});var r=s(10326),a=s(17577),i=s(51223);let d=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{className:"relative w-full overflow-auto",children:r.jsx("table",{ref:s,className:(0,i.cn)("w-full caption-bottom text-sm",e),...t})}));d.displayName="Table";let o=a.forwardRef(({className:e,...t},s)=>r.jsx("thead",{ref:s,className:(0,i.cn)("[&_tr]:border-b",e),...t}));o.displayName="TableHeader";let n=a.forwardRef(({className:e,...t},s)=>r.jsx("tbody",{ref:s,className:(0,i.cn)("[&_tr:last-child]:border-0",e),...t}));n.displayName="TableBody",a.forwardRef(({className:e,...t},s)=>r.jsx("tfoot",{ref:s,className:(0,i.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let l=a.forwardRef(({className:e,...t},s)=>r.jsx("tr",{ref:s,className:(0,i.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));l.displayName="TableRow";let c=a.forwardRef(({className:e,...t},s)=>r.jsx("th",{ref:s,className:(0,i.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));c.displayName="TableHead";let u=a.forwardRef(({className:e,...t},s)=>r.jsx("td",{ref:s,className:(0,i.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));u.displayName="TableCell",a.forwardRef(({className:e,...t},s)=>r.jsx("caption",{ref:s,className:(0,i.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption"},82015:(e,t,s)=>{"use strict";s.d(t,{g:()=>d});var r=s(10326),a=s(17577),i=s(51223);let d=a.forwardRef(({className:e,...t},s)=>r.jsx("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...t}));d.displayName="Textarea"},63853:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>d,__esModule:()=>i,default:()=>o});var r=s(68570);let a=(0,r.createProxy)(String.raw`C:\Users\Admin\Desktop\app\app\dashboard\head-teacher\review-submissions\page.tsx`),{__esModule:i,$$typeof:d}=a;a.default;let o=(0,r.createProxy)(String.raw`C:\Users\Admin\Desktop\app\app\dashboard\head-teacher\review-submissions\page.tsx#default`)},29152:(e,t,s)=>{"use strict";s.d(t,{f:()=>n});var r=s(17577);s(60962);var a=s(34214),i=s(10326),d=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let s=(0,a.Z8)(`Primitive.${t}`),d=r.forwardRef((e,r)=>{let{asChild:a,...d}=e,o=a?s:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,i.jsx)(o,{...d,ref:r})});return d.displayName=`Primitive.${t}`,{...e,[t]:d}},{}),o=r.forwardRef((e,t)=>(0,i.jsx)(d.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));o.displayName="Label";var n=o}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[8537,434,3121,9082,9131,8578],()=>s(64738));module.exports=r})();