"use strict";(()=>{var e={};e.id=5890,e.ids=[5890],e.modules={60325:e=>{e.exports=require("firebase-admin/app")},65877:e=>{e.exports=require("firebase-admin/auth")},12594:e=>{e.exports=require("firebase-admin/firestore")},20145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},56249:(e,a)=>{Object.defineProperty(a,"l",{enumerable:!0,get:function(){return function e(a,t){return t in a?a[t]:"then"in a&&"function"==typeof a.then?a.then(a=>e(a,t)):"function"==typeof a&&"default"===t?a:void 0}}})},403:(e,a,t)=>{let s,i,r;t.r(a),t.d(a,{config:()=>_,default:()=>x,routeModule:()=>k});var o={};t.r(o),t.d(o,{default:()=>P});var n=t(71802),d=t(47153),l=t(56249),c=t(60325),m=t(12594),u=t(65877);let h=JSON.parse('[{"id":"system_admin_user","email":"systemadmin@system.com","password":"admin12345","displayName":"System Admin","role":"system-admin","schoolId":null},{"id":"primaryadmin_navolaudistrictschool","email":"navolaudistrictschool@yahoo.com","password":"password123","displayName":"Navalau District School Admin","role":"primary-admin","schoolId":"2009"},{"id":"headteacher_rosabatina3","email":"rosabatina3@gmail.com","password":"password123","displayName":"Rosa Batina","role":"head-teacher","schoolId":"2009"},{"id":"teacher_lureqeleticia","email":"lureqeleticia@gmail.com","password":"password123","displayName":"Lureqe Leticia","role":"teacher","schoolId":"2009"},{"id":"teacher_eshitaprasad028","email":"eshitaprasad028@gmail.com","password":"password123","displayName":"Eshita Prasad","role":"teacher","schoolId":"2009"},{"id":"teacher_kolovanimeiwaga","email":"kolovanimeiwaga@yahoo.com","password":"password123","displayName":"Kolovani Meiwaga","role":"teacher","schoolId":"2009"},{"id":"teacher_milielinatale6","email":"milielinatale6@gmail.com","password":"password123","displayName":"Milieli Natale","role":"teacher","schoolId":"2009"},{"id":"teacher_mwatabu","email":"mwatabu@gmail.com","password":"password123","displayName":"M. Watabu","role":"teacher","schoolId":"2009"}]'),p=JSON.parse('[{"id":"2009","name":"Navolau District School","address":"Navolau, Ba","type":"Primary School"}]'),f=JSON.parse('[{"id":"teacher_lureqeleticia","staffId":"T-001","name":"Lureqe Leticia","role":"teacher","position":"Class Teacher - Year 1","yearLevel":"Year 1","department":"Academics","status":"Active","email":"lureqeleticia@gmail.com","phone":"555-0101","schoolId":"2009","tpfNumber":"TPF-1111"},{"id":"teacher_eshitaprasad028","staffId":"T-002","name":"Eshita Prasad","role":"teacher","position":"Class Teacher - Year 2","yearLevel":"Year 2","department":"Academics","status":"Active","email":"eshitaprasad028@gmail.com","phone":"555-0102","schoolId":"2009","tpfNumber":"TPF-2222"},{"id":"teacher_kolovanimeiwaga","staffId":"T-003","name":"Kolovani Meiwaga","role":"teacher","position":"Class Teacher - Year 3","yearLevel":"Year 3","department":"Academics","status":"Active","email":"kolovanimeiwaga@yahoo.com","phone":"555-0103","schoolId":"2009","tpfNumber":"TPF-3333"},{"id":"headteacher_rosabatina3","staffId":"HT-001","name":"Rosa Batina","role":"head-teacher","position":"Head Teacher","yearLevel":"N/A","department":"Administration","status":"Active","email":"rosabatina3@gmail.com","phone":"555-0100","schoolId":"2009","tpfNumber":"TPF-4444"},{"id":"primaryadmin_navolaudistrictschool","staffId":"PA-001","name":"Navalau District School","role":"primary-admin","position":"Primary Admin","yearLevel":"N/A","department":"Administration","status":"Active","email":"navolaudistrictschool@yahoo.com","phone":"555-0104","schoolId":"2009","tpfNumber":"TPF-5555"},{"id":"teacher_milielinatale6","staffId":"T-004","name":"Milieli Natale","role":"teacher","position":"Class Teacher - Year 4","yearLevel":"Year 4","department":"Academics","status":"Active","email":"milielinatale6@gmail.com","phone":"555-0105","schoolId":"2009","tpfNumber":"TPF-6666"},{"id":"teacher_mwatabu","staffId":"T-005","name":"M. Watabu","role":"teacher","position":"Class Teacher - Year 5","yearLevel":"Year 5","department":"Academics","status":"Active","email":"mwatabu@gmail.com","phone":"555-0106","schoolId":"2009","tpfNumber":"TPF-7777"},{"id":"staff-008","staffId":"AHT-001","name":"Jone Sovasova","role":"assistant-head-teacher","position":"Assistant Head Teacher","yearLevel":"N/A","department":"Administration","status":"Active","email":"j.sovasova@example.com","phone":"555-0107","schoolId":"2009","tpfNumber":"TPF-8888"},{"id":"staff-009","staffId":"T-006","name":"Sereana Nai","role":"teacher","position":"Class Teacher - Year 6","yearLevel":"Year 6","department":"Academics","status":"Active","email":"s.nai@example.com","phone":"555-0108","schoolId":"2009","tpfNumber":"TPF-9999"},{"id":"staff-010","staffId":"LIB-001","name":"Anare Vadei","role":"librarian","position":"Librarian","yearLevel":"N/A","department":"Support Staff","status":"Active","email":"a.vadei@example.com","phone":"555-0109","schoolId":"2009","tpfNumber":"TPF-1010"},{"id":"staff-011","staffId":"KG-001","name":"Maria Prasad","role":"kindergarten","position":"Kindergarten Teacher","yearLevel":"Kindergarten","department":"Academics","status":"Active","email":"m.prasad@example.com","phone":"555-0110","schoolId":"2009","tpfNumber":"TPF-1122"}]'),y=JSON.parse('[{"id":"inv-001","itemName":"Student Desk","category":"Furniture","quantity":150,"value":75.5,"status":"In Stock","location":"Main Storeroom","description":"Standard wooden student desk.","schoolId":"2009"},{"id":"inv-002","itemName":"Student Chair","category":"Furniture","quantity":160,"value":45,"status":"In Stock","location":"Main Storeroom","description":"Standard plastic and metal student chair.","schoolId":"2009"},{"id":"inv-003","itemName":"Dell Latitude Laptop","category":"Electronics","quantity":25,"value":1200,"status":"In Stock","location":"IT Department","description":"14-inch laptop for staff use.","schoolId":"2009"}]'),v=JSON.parse('[{"id":"exam-res-001","schoolId":"2009","studentId":"S12345","studentName":"Jone Doe","studentYear":"3","examType":"Mid-Term","subject":"Mathematics","score":85,"grade":"A","examDate":"2024-06-10","term":"2","year":"2024","comments":"Excellent work in geometry.","recordedByUserId":"teacher_lureqeleticia"},{"id":"exam-res-002","schoolId":"2009","studentId":"S12346","studentName":"Adi Litia","studentYear":"2","examType":"Final Exam","subject":"English","score":92,"grade":"A+","examDate":"2024-11-20","term":"4","year":"2024","comments":"Outstanding performance in comprehension and writing.","recordedByUserId":"teacher_eshitaprasad028"},{"id":"exam-res-003","schoolId":"2009","studentId":"S12347","studentName":"Ratu Manasa","studentYear":"4","examType":"Mid-Term","subject":"Science","score":68,"grade":"C","examDate":"2024-06-11","term":"2","year":"2024","comments":"Needs improvement in understanding life cycles.","recordedByUserId":"teacher_milielinatale6"}]'),w=JSON.parse('[{"id":"book-001","title":"To Kill a Mockingbird","author":"Harper Lee","isbn":"978-0-06-112008-4","totalCopies":3,"schoolId":"2009"},{"id":"book-002","title":"1984","author":"George Orwell","isbn":"978-0-452-28423-4","totalCopies":5,"schoolId":"2009"},{"id":"book-003","title":"The Great Gatsby","author":"F. Scott Fitzgerald","isbn":"978-0-7432-7356-5","totalCopies":4,"schoolId":"2009"},{"id":"book-004","title":"Pride and Prejudice","author":"Jane Austen","isbn":"978-1-5032-9056-3","totalCopies":2,"schoolId":"2009"},{"id":"book-005","title":"The Catcher in the Rye","author":"J.D. Salinger","isbn":"978-0-316-76948-0","totalCopies":6,"schoolId":"2009"}]'),g=JSON.parse('[{"id":"disciplinary-rec-001","schoolId":"2009","userId":"teacher_lureqeleticia","incidentDate":"2024-05-10","studentName":"Ratu Manasa","studentId":"S12347","studentDob":"2014-11-05","studentYear":"Year 4","issues":["Bullying","Disrespect"],"comments":"Ratu was reported by two other students for repeatedly teasing and pushing them during recess. When approached, he was disrespectful to the teacher on duty.","raisedBy":"M. Watabu (Teacher on Duty)","parentsInformed":"Yes","actionComments":"Parents were called in for a meeting. Ratu has been given a 2-day in-school suspension and must write an apology letter to the students he bullied."},{"id":"disciplinary-rec-002","schoolId":"2009","userId":"teacher_kolovanimeiwaga","incidentDate":"2024-05-12","studentName":"Sereana Vula","studentId":"S12348","studentDob":"2016-01-30","studentYear":"Year 2","issues":["Absenteeism"],"comments":"Sereana was absent for 3 consecutive days without any notification from her parents.","raisedBy":"Eshita Prasad (Class Teacher)","parentsInformed":"Attempted","actionComments":"Multiple calls were made to the parents with no response. A home visit has been scheduled with the Head Teacher."}]'),b=JSON.parse('[{"id":"counselling-rec-001","schoolId":"2009","userId":"teacher_lureqeleticia","sessionDate":"2024-05-15","studentName":"Jone Doe","studentId":"S12345","studentDob":"2015-08-20","studentYear":"Year 3","counsellingType":"Behavioral","sessionDetails":"Jone has been having trouble focusing in class and has had minor altercations with peers. Discussed strategies for managing frustration and staying on task.","actionPlan":"Scheduled weekly check-ins for the next 4 weeks. Provided Jone with a \'calm-down\' card to use when feeling overwhelmed. Will monitor peer interactions.","parentsContacted":"Yes","counsellorName":"Lureqe Leticia"},{"id":"counselling-rec-002","schoolId":"2009","userId":"teacher_eshitaprasad028","sessionDate":"2024-05-18","studentName":"Adi Litia","studentId":"S12346","studentDob":"2016-02-11","studentYear":"Year 2","counsellingType":"Academic","sessionDetails":"Adi is expressing anxiety about reading aloud in class. She is a strong reader but fears making mistakes in front of her peers.","actionPlan":"Will practice reading in a small, supportive group setting. Encouraged Adi to choose the book for the next read-aloud session to build confidence. Provided positive reinforcement.","parentsContacted":"No","counsellorName":"Eshita Prasad"}]'),A=JSON.parse('[{"id":"ohs-rec-001","schoolId":"2009","incidentType":"Injury","location":"Playground - Swing Area","incidentDate":"2024-05-20","description":"Student fell from the swing while trying to stand on it. Minor scrape on the left knee.","actionTaken":"First aid was administered immediately by the teacher on duty. The student was cleaned up and a bandage was applied. Parents were notified via phone call.","reportedBy":"M. Watabu"},{"id":"ohs-rec-002","schoolId":"2009","incidentType":"Hazard","location":"Year 4 Classroom","incidentDate":"2024-05-21","description":"A broken floor tile was identified near the classroom entrance, creating a tripping hazard.","actionTaken":"The area was immediately cordoned off with chairs. A hazard sign was placed. The school\'s maintenance staff was informed and a request for repair was logged.","reportedBy":"Milieli Natale"}]'),I=JSON.parse('[{"id":"att-001","schoolId":"2009","staffId":"staff-001","staffName":"Lureqe Leticia","date":"2024-09-19","status":"Present","notes":"","recordedBy":"headteacher_rosabatina3"},{"id":"att-002","schoolId":"2009","staffId":"staff-002","staffName":"Eshita Prasad","date":"2024-09-19","status":"Sick","notes":"Has a doctor\'s appointment.","recordedBy":"headteacher_rosabatina3"},{"id":"att-003","schoolId":"2009","staffId":"staff-003","staffName":"Kolovani Meiwaga","date":"2024-09-19","status":"Present","notes":"","recordedBy":"headteacher_rosabatina3"},{"id":"att-004","schoolId":"2009","staffId":"staff-004","staffName":"Rosa Batina","date":"2024-09-19","status":"Present","notes":"","recordedBy":"primaryadmin_navolaudistrictschool"}]'),N=JSON.parse('[{"id":"system-admin","name":"System Admin","users":[],"permissions":["dashboard:primary-admin:view","dashboard:head-teacher:view","dashboard:teacher:view","users:view","users:create","users:edit","users:delete","roles:assign","permissions:manage","school-info:edit","staff:view","staff:add","staff:edit","staff:delete","lesson-plans:submit","lesson-plans:review","exam-results:view","exam-results:add","exam-results:delete","disciplinary:view","disciplinary:add","disciplinary:delete","counselling:view","counselling:add","counselling:delete","inventory:primary:view","inventory:primary:edit","inventory:classroom:view","inventory:classroom:edit","library:view","library:edit","library:transact","operations:master-data:upload","operations:email-settings:manage","reports:school:view","health-safety:view","attendance:view"]},{"id":"primary-admin","name":"Primary Admin","users":[],"permissions":["dashboard:head-teacher:view","dashboard:teacher:view","users:view","users:create","users:edit","school-info:edit","staff:view","staff:add","staff:edit","lesson-plans:review","exam-results:view","exam-results:add","exam-results:delete","disciplinary:view","disciplinary:add","disciplinary:delete","counselling:view","counselling:add","counselling:delete","inventory:primary:view","inventory:primary:edit","inventory:classroom:view","inventory:classroom:edit","library:view","library:edit","library:transact","operations:master-data:upload","operations:email-settings:manage","reports:school:view","health-safety:view","attendance:view"]},{"id":"head-teacher","name":"Head Teacher","users":[],"permissions":["dashboard:teacher:view","school-info:edit","staff:view","staff:edit","lesson-plans:review","exam-results:view","exam-results:add","disciplinary:view","disciplinary:add","counselling:view","counselling:add","inventory:primary:view","inventory:primary:edit","inventory:classroom:view","inventory:classroom:edit","reports:school:view","health-safety:view","attendance:view","teachers:rate"]},{"id":"assistant-head-teacher","name":"Assistant Head Teacher","users":[],"permissions":["dashboard:teacher:view","school-info:edit","staff:view","lesson-plans:review","exam-results:view","disciplinary:view","counselling:view","inventory:classroom:view","inventory:classroom:edit","reports:school:view","health-safety:view","attendance:view"]},{"id":"teacher","name":"Teacher","users":[],"permissions":["dashboard:teacher:view","lesson-plans:submit","exam-results:add","disciplinary:add","counselling:add","inventory:classroom:view","inventory:classroom:edit","health-safety:view"]},{"id":"kindergarten","name":"Kindergarten Teacher","users":[],"permissions":["dashboard:teacher:view","lesson-plans:submit","exam-results:add","disciplinary:add","counselling:add","inventory:classroom:view","inventory:classroom:edit","health-safety:view"]},{"id":"librarian","name":"Librarian","users":[],"permissions":["dashboard:teacher:view","school-info:edit","library:view","library:edit","library:transact"]}]');if(function(){var e=Error("Cannot find module '../../../serviceAccountKey.json'");throw e.code="MODULE_NOT_FOUND",e}(),Object(function(){var e=Error("Cannot find module '../../../serviceAccountKey.json'");throw e.code="MODULE_NOT_FOUND",e}())&&!(0,c.getApps)().length)try{s=(0,c.initializeApp)({credential:(0,c.cert)(Object(function(){var e=Error("Cannot find module '../../../serviceAccountKey.json'");throw e.code="MODULE_NOT_FOUND",e}()))}),i=(0,m.getFirestore)(s),r=(0,u.getAuth)(s)}catch(e){console.error("Firebase Admin Initialization Error",e)}else(0,c.getApps)().length>0&&(s=(0,c.getApps)()[0],i=(0,m.getFirestore)(s),r=(0,u.getAuth)(s));async function T(e,a,t,s){for(let r of a)try{let{id:a,...s}=r;if(!a)throw Error(`Item in ${e} is missing an 'id' field.`);await i.collection(e).doc(a).set(s),t.push(`Seeded ${e}: ${a}`)}catch(t){let a=t instanceof Error?t.message:String(t);console.error(`Error seeding ${e} with id ${r.id}:`,a),s.push(`Failed ${e} - ${r.id}: ${a}`)}}async function S(e,a,t){for(let s of e)try{let e;let{id:t,email:o,password:n,displayName:d,role:l,schoolId:c}=s,m=!1;try{e=await r.getUser(t),m=!0,a.push(`Auth user already exists (UID): ${o}`)}catch(t){if("auth/user-not-found"===t.code)try{e=await r.getUserByEmail(o),m=!0,a.push(`Auth user already exists (Email): ${o}`)}catch(e){if("auth/user-not-found"!==e.code)throw e}else throw t}if(m||(e=await r.createUser({uid:t,email:o,password:n,displayName:d}),a.push(`Created Auth user: ${o}`)),e)await r.setCustomUserClaims(e.uid,{role:l,schoolId:c}),await i.collection("users").doc(e.uid).set({uid:e.uid,email:o,role:l,schoolId:c,displayName:d}),a.push(`Set claims and updated Firestore for: ${o}`);else throw Error(`User record for ${o} was not found or created.`)}catch(a){let e=a instanceof Error?a.message:String(a);console.error(`Error seeding Auth user ${s.email}:`,e),t.push(`Failed Auth user - ${s.email}: ${e}`)}}async function P(e,a){if("POST"!==e.method)return a.status(405).json({message:"Method Not Allowed"});if(!i||!r)return a.status(500).json({success:!1,details:"Firebase Admin SDK not initialized. Check server logs."});let t={users:[],schools:[],staff:[],inventory:[],examResults:[],libraryBooks:[],disciplinaryRecords:[],counsellingRecords:[],ohsRecords:[],staffAttendance:[],permissionGroups:[],errors:[]};try{if(await S(h,t.users,t.errors),await T("schools",p,t.schools,t.errors),await T("staff",f,t.staff,t.errors),await T("inventory",y,t.inventory,t.errors),await T("examResults",v,t.examResults,t.errors),await T("books",w,t.libraryBooks,t.errors),await T("disciplinary",g,t.disciplinaryRecords,t.errors),await T("counselling",b,t.counsellingRecords,t.errors),await T("ohsRecords",A,t.ohsRecords,t.errors),await T("staffAttendance",I,t.staffAttendance,t.errors),await T("permissionGroups",N,t.permissionGroups,t.errors),t.errors.length>0)return a.status(207).json({success:!1,details:"Completed with some errors.",report:t});a.status(200).json({success:!0,report:t})}catch(e){console.error("An unexpected error occurred during seeding:",e),a.status(500).json({success:!1,details:e instanceof Error?e.message:"An unknown server error occurred.",report:t})}}let x=(0,l.l)(o,"default"),_=(0,l.l)(o,"config"),k=new n.PagesAPIRouteModule({definition:{kind:d.x.PAGES_API,page:"/api/seed",pathname:"/api/seed",bundlePath:"",filename:""},userland:o})},47153:(e,a)=>{var t;Object.defineProperty(a,"x",{enumerable:!0,get:function(){return t}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(t||(t={}))},71802:(e,a,t)=>{e.exports=t(20145)}};var a=require("../../webpack-api-runtime.js");a.C(e);var t=a(a.s=403);module.exports=t})();